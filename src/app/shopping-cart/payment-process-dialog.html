<div class="container">
    <h3>Shipping Detail</h3>
    <form (ngSubmit)="checkoutProduct()">
    <mat-accordion class="example-headers-align">
        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Shipping Address
                </mat-panel-title>
                <mat-panel-description>
                    Select existing or add new
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-radio-group (change)="showHideAddress($event)">
                <mat-radio-button [checked]="true" *ngIf="address_obj?.length" value="1">Select Existing</mat-radio-button>&nbsp;
                <mat-radio-button value="2">Add New</mat-radio-button>
            </mat-radio-group>

            <ng-template [ngIf]="!show_address">
                <div>
                    <mat-radio-group (change)="getSelectedAddress($event)">
                        <mat-radio-button *ngFor="let add_row of address_obj" [value]="add_row.id">{{ add_row.address }} {{ add_row.land_mark }} {{ add_row.city }} {{ add_row.zipcode }} {{ add_row.state }} {{ add_row.country }}</mat-radio-button>&nbsp;
                    </mat-radio-group>
                    <!-- <mat-checkbox #current_address (change)="getSelectedAddress(current_address)">111, Lorem ipsum building, Mumbai, Maharastra-123456, India</mat-checkbox> -->
                </div>
            </ng-template>
            <ng-template [ngIf]="show_address">
                <mat-form-field>
                    <input matInput id="address" #address placeholder="Address" required value="">
                </mat-form-field>
                <mat-form-field>
                    <input matInput id="land_mark" #land_mark placeholder="Near by land mark" required value="">
                </mat-form-field>
                <mat-form-field>
                    <input matInput id="zipcode" #zipcode type="text" placeholder="Zipcode" required value="">
                </mat-form-field>
                <mat-form-field>
                    <mat-select id="city" (selectionChange)="changeCity(city.value)" #city placeholder="City">
                        <mat-option value="Ahmedabad">
                            Ahmedabad
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <mat-select id="state" #state placeholder="State">
                        <mat-option value="Gujarat">
                            Gujarat
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <mat-select id="country" #country placeholder="Country">
                        <mat-option value="India">
                            India
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </ng-template>
            
            <mat-action-row>
                <span mat-button color="primary" class="mat-button" (click)="nextStep()">Save Address</span>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Final Amount
                </mat-panel-title>
                <mat-panel-description>
                    Final amount to pay
                </mat-panel-description>
            </mat-expansion-panel-header>

            <b>&#x20b9; {{ final_amount }}</b>

            <!-- <input type="hidden" name="MID" [value]="paramList.MID">
            <input type="hidden" name="ORDER_ID" [value]="paramList.ORDER_ID">
            <input type="hidden" name="CUST_ID" [value]="paramList.CUST_ID">
            <input type="hidden" name="INDUSTRY_TYPE_ID" [value]="paramList.INDUSTRY_TYPE_ID">
            <input type="hidden" name="CHANNEL_ID" [value]="paramList.CHANNEL_ID">
            <input type="hidden" name="TXN_AMOUNT" [value]="paramList.TXN_AMOUNT">
            <input type="hidden" name="WEBSITE" [value]="paramList.WEBSITE">
            <input type="hidden" name="CALLBACK_URL" [value]="paramList.CALLBACK_URL">
            <input type="hidden" name="PAYMENT_MODE_ONLY" [value]="payment_mode_only">
            <input type="hidden" name="AUTH_MODE" [value]="auth_mode">
            <input type="hidden" name="PAYMENT_TYPE_ID" [value]="payment_type_id">
            <input type="hidden" name="CARD_TYPE" [value]="card_type">

            <input type="hidden" name="CHECKSUMHASH" [value]="checksum"> -->

            <mat-action-row>
                <span mat-button color="warn" class="mat-button" (click)="prevStep()">Previous</span>
                <ng-template [ngIf]="!current_address_selected && !valid_address">
                    <span class="mat-button" mat-button color="primary">&nbsp;Add</span>
                </ng-template>
                <ng-template [ngIf]="current_address_selected || valid_address">
                    <button mat-button color="primary">Add</button>
                </ng-template>
            </mat-action-row>
        </mat-expansion-panel>

    </mat-accordion>
    </form>
</div>

<!-- <div mat-dialog-content>
    <h1>Please do not refresh this page...</h1>
    <form method="post" action="{{call_url}}" name="f1" id="f1">
        <table border="1">
            <tbody>
                <input type="hidden" name="MID" [value]="paramList.MID">
                <input type="hidden" name="ORDER_ID" [value]="paramList.ORDER_ID">
                <input type="hidden" name="CUST_ID" [value]="paramList.CUST_ID">
                <input type="hidden" name="INDUSTRY_TYPE_ID" [value]="paramList.INDUSTRY_TYPE_ID">
                <input type="hidden" name="CHANNEL_ID" [value]="paramList.CHANNEL_ID">
                <input type="hidden" name="TXN_AMOUNT" [value]="paramList.TXN_AMOUNT">
                <input type="hidden" name="WEBSITE" [value]="paramList.WEBSITE">
                <input type="hidden" name="CALLBACK_URL" [value]="paramList.CALLBACK_URL">
                <input type="hidden" name="PAYMENT_MODE_ONLY" [value]="payment_mode_only">
                <input type="hidden" name="AUTH_MODE" [value]="auth_mode">
                <input type="hidden" name="PAYMENT_TYPE_ID" [value]="payment_type_id">
                <input type="hidden" name="CARD_TYPE" [value]="card_type">

                <input type="hidden" name="CHECKSUMHASH" [value]="checksum">
            </tbody>
        </table>
    </form>
</div> -->